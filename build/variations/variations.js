(()=>{"use strict";const e=window.wp.blocks,t=window.wp.i18n,n=window.wp.primitives,s=window.ReactJSXRuntime,r=(0,s.jsx)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)(n.Path,{d:"M20 4H4v1.5h16V4zm-2 9h-3c-1.1 0-2 .9-2 2v3c0 1.1.9 2 2 2h3c1.1 0 2-.9 2-2v-3c0-1.1-.9-2-2-2zm.5 5c0 .3-.2.5-.5.5h-3c-.3 0-.5-.2-.5-.5v-3c0-.3.2-.5.5-.5h3c.3 0 .5.2.5.5v3zM4 9.5h9V8H4v1.5zM9 13H6c-1.1 0-2 .9-2 2v3c0 1.1.9 2 2 2h3c1.1 0 2-.9 2-2v-3c0-1.1-.9-2-2-2zm.5 5c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5v-3c0-.3.2-.5.5-.5h3c.3 0 .5.2.5.5v3z",fillRule:"evenodd",clipRule:"evenodd"})}),i=(0,s.jsx)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)(n.Path,{d:"M8 12.5h8V11H8v1.5Z M19 6.5H5a2 2 0 0 0-2 2V15a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a2 2 0 0 0-2-2ZM5 8h14a.5.5 0 0 1 .5.5V15a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V8.5A.5.5 0 0 1 5 8Z"})}),o=window.wp.hooks,a="gp-onlineevent-or-venue",c="core/button",l=window.wp.components,u=function(e){const n="string"==typeof e?20:24,r=(0,t.sprintf)("-$%dpx",n/4),i=()=>(0,s.jsx)(l.Icon,{icon:"nametag",size:12}),o=()=>(0,s.jsx)(l.Icon,{icon:e});return(0,s.jsxs)(l.__experimentalZStack,{offset:15,isLayered:!0,children:[(0,s.jsx)(o,{}),(0,s.jsx)("div",{style:{color:"var(--wp-components-color-accent,var(--wp-admin-theme-color,#3858e9))",marginTop:r,marginRight:r},children:(0,s.jsx)(i,{})})]})},h=window.wp.compose,p=window.wp.blockEditor,d=window.wp.coreData,g=(0,s.jsxs)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)(n.Path,{d:"M7.5 12C7.5 11.1716 6.82843 10.5 6 10.5C5.17157 10.5 4.5 11.1716 4.5 12C4.5 12.8284 5.17157 13.5 6 13.5C6.82843 13.5 7.5 12.8284 7.5 12Z"}),(0,s.jsx)(n.Path,{d:"M13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12C10.5 12.8284 11.1716 13.5 12 13.5C12.8284 13.5 13.5 12.8284 13.5 12Z"}),(0,s.jsx)(n.Path,{d:"M19.5 12C19.5 11.1716 18.8284 10.5 18 10.5C17.1716 10.5 16.5 11.1716 16.5 12C16.5 12.8284 17.1716 13.5 18 13.5C18.8284 13.5 19.5 12.8284 19.5 12Z"})]}),v=window.wp.element,w=(e=null)=>{const n=(0,v.useCallback)((t=>{const n={...e.attributes,urlShorten:t};e.setAttributes(n)}),[e]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(l.RangeControl,{label:(0,t.__)("Maximum length of the shortened URL.","gatherpress"),help:(0,t.__)("Defaults to 35 characters.","gatherpress"),value:e?.attributes?.urlShorten||35,resetFallbackValue:35,withInputField:!1,afterIcon:g,max:100,min:0,onChange:n,step:1})})},m=window.wp.data,x=(0,h.createHigherOrderComponent)((e=>n=>{if(n.name!==c)return(0,s.jsx)(e,{...n});if(!n?.attributes?.className?.includes(a+"-button"))return(0,s.jsx)(e,{...n});const{isSelected:r}=n,i=function(e=null){return e||(0,m.select)("core/editor").getCurrentPostId()}(n?.context?.postId),[o,u]=(0,d.useEntityProp)("postType","gatherpress_event","meta",i),h={...n,attributes:{...n.attributes,text:n.attributes.text.substring(0,n.attributes.urlShorten)}};return(0,s.jsxs)(s.Fragment,{children:[o?.gatherpress_online_event_link?(0,s.jsx)(s.Fragment,{children:r?(0,s.jsx)(e,{...h}):(0,s.jsx)(e,{...n})}):(0,s.jsx)(l.Disabled,{style:{opacity:"35%"},children:(0,s.jsx)(e,{...n})}),r&&(0,s.jsx)(p.InspectorControls,{children:(0,s.jsx)(l.PanelBody,{title:(0,t.__)("onlineEventButtonEdit settings","gatherpress"),initialOpen:!0,children:(0,s.jsx)(l.PanelRow,{children:(0,s.jsx)(w,{...n})})})})]})}),"onlineEventButtonEdit");(0,e.registerBlockVariation)("core/post-terms",{name:a,title:(0,t.__)("Venue Archive Links","gatherpress"),description:(0,t.__)("Displays links to the selected venues archive.","gatherpress"),category:"gatherpress",icon:u(r),isActive:["term","className"],attributes:{className:a,term:"_gatherpress_venue"}});const b={title:(0,t.__)("Online-Event Link","gatherpress"),description:(0,t.__)("A button linking to the online-event or the venue.","gatherpress"),category:"gatherpress",icon:u(i)},j={className:a+"-button",tagName:"a",title:(0,t.__)("Visit Online-Event","gatherpress"),text:"üåê "+(0,t.__)("Online-Event","gatherpress"),metadata:{bindings:{url:{source:"gatherpress/onlineevent-or-venue",args:{key:"url"}},text:{source:"gatherpress/onlineevent-or-venue",args:{key:"text"}}}},urlShorten:20};(0,e.registerBlockVariation)(c,{...b,name:a+"-button",isActive:["className","metadata.bindings.url.source"],isActive:["metadata.bindings.url.source"],attributes:{...j},scope:["inserter","transform","block"],example:{}}),(0,e.registerBlockVariation)("core/buttons",{...b,name:"pseudo-"+a+"-button",innerBlocks:[[c,{...j}]],example:{innerBlocks:[{name:c,attributes:{...j}}]}}),(0,o.addFilter)("editor.BlockEdit","gatherpress-onlineevent-or-venue/button-block-variation",x,1),(0,o.addFilter)("blocks.registerBlockType","gatherpress-onlineevent-or-venue/extend-button-block",(function(e,t){return t!==c?e:{...e,attributes:{...e.attributes,urlShorten:{type:"integer"}},supports:{...e.supports,className:!1}}}))})();